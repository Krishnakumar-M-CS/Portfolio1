<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Krishnakumar — Portfolio</title>
  <meta name="description" content="Portfolio of Krishnakumar — Software Engineer (Student)" />
  <meta name="theme-color" content="#dc2743" />
  <style>
    /*
      Final: Single-file portfolio
      - Minimal "skill elements" section (pill-like elements)
      - No percentages / bars
      - Preserves Projects, Contact, Professional Summary, responsive nav, dark mode, accessibility
    */

    :root{
      --bg:#f7f8fb;
      --card:#ffffff;
      --card-alt:#fff7f6;
      --muted:#5e6673;
      --text:#121418;
      --accent1:#e6683c;
      --accent2:#cc2366;

      --ring1:#f09433; --ring2:#e6683c; --ring3:#dc2743; --ring4:#cc2366; --ring5:#bc1888;

      --nav-bg: rgba(255,255,255,.95);
      --nav-border: rgba(0,0,0,.06);

      --maxw:1200px;
      --avatar:140px;
      --nav-height:72px;

      --radius:14px;
      --shadow: 0 16px 40px rgba(0,0,0,.08);
    }

    /* dark */
    body.dark{
      --bg:#0f1114;
      --card:#171a1f;
      --card-alt:#202329;
      --muted:#c3c7cf;
      --text:#f5f7fa;
      --accent1:#f48db2;
      --accent2:#f48db2;
      --nav-bg: rgba(15,17,20,.88);
      --nav-border: rgba(255,255,255,.06);
      --shadow: none;
    }

    /* reset & base */
    *{box-sizing:border-box;margin:0;padding:0}
    html{scroll-behavior:smooth}
    body{
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
      line-height:1.6;
      font-size:18px;
    }
    img{max-width:100%;display:block}
    a{color:var(--accent2); text-decoration:none}
    a:focus{outline:3px solid rgba(204,35,102,.12); outline-offset:3px}
    .container{max-width:var(--maxw);margin:0 auto;padding:0 1.2rem}

    /* skip link */
    .skip-link{position:absolute;left:-999px;top:auto}
    .skip-link:focus{left:1rem;top:1rem;padding:.4rem .6rem;background:#fff;color:#000;border-radius:8px;z-index:9999}

    /* NAV */
    nav.primary{position:sticky;top:0;z-index:220;background:var(--nav-bg);border-bottom:1px solid var(--nav-border);backdrop-filter:blur(8px)}
    .nav-inner{max-width:var(--maxw);margin:0 auto;padding:.9rem 1.2rem;display:flex;align-items:center;justify-content:space-between;gap:1rem;position:relative}
    .brand{font-weight:900;display:flex;align-items:center;gap:.6rem}
    .brand-dot{width:12px;height:12px;border-radius:99px;background:linear-gradient(135deg,var(--ring1),var(--ring5))}

    .menu{display:flex;gap:.4rem;align-items:center;position:relative}
    .menu a{padding:.45rem .7rem;border-radius:10px;font-weight:700;color:var(--text)}
    .menu a:hover{background:rgba(0,0,0,.04)}
    body.dark .menu a:hover{background:rgba(255,255,255,.03)}
    .menu a.active{background:linear-gradient(135deg,var(--ring2),var(--ring4));color:#fff}

    .nav-indicator{position:absolute;bottom:-2px;left:0;height:3px;border-radius:3px;background:linear-gradient(90deg,var(--ring2),var(--ring4));width:0;transform:translateX(0);transition:width .22s, transform .22s, opacity .18s;opacity:0}

    .nav-actions{display:flex;gap:.6rem;align-items:center}
    .btn{appearance:none;border:0;cursor:pointer;padding:.55rem .85rem;border-radius:10px;background:transparent;font-weight:800}
    .btn--ghost{border:1px solid var(--nav-border)}
    .btn--primary{background:linear-gradient(135deg,var(--ring2),var(--ring4));color:#fff;padding:.6rem .9rem;border-radius:10px}
    .hamburger{display:none;font-size:1.05rem;padding:.35rem .6rem;border-radius:8px;border:1px solid transparent;background:transparent}

    @media (max-width:900px){
      .hamburger{display:inline-flex}
      .menu{position:absolute;left:0;right:0;top:100%;flex-direction:column;gap:0;background:var(--nav-bg);border-bottom:1px solid var(--nav-border);overflow:hidden;max-height:0;opacity:0;pointer-events:none;transition:max-height .28s, opacity .22s}
      .menu a{padding:.95rem 1.1rem;border-radius:0}
      body.menu-open .menu{max-height:520px;opacity:1;pointer-events:auto}
      .nav-indicator{opacity:0}
    }

    /* HERO */
    header.hero{background:linear-gradient(135deg,var(--ring1),var(--ring2),var(--ring3),var(--ring4));color:#fff;padding:5rem 0 2.5rem;border-bottom-left-radius:44px;border-bottom-right-radius:44px;box-shadow:var(--shadow)}
    header#home{scroll-margin-top:calc(var(--nav-height) + 12px)}
    .hero-inner{max-width:var(--maxw);margin:0 auto;padding-left:calc(var(--avatar) + 2rem);position:relative;min-height:var(--avatar)}
    .avatar-wrap{position:absolute;left:1.2rem;top:1rem;width:var(--avatar);height:var(--avatar);padding:4px;border-radius:999px;display:grid;place-items:center;background:conic-gradient(from 0deg,var(--ring1),var(--ring3))}
    .avatar{width:100%;height:100%;border-radius:999px;object-fit:cover;border:5px solid #fff}
    .hero h1{font-size:clamp(1.9rem,3.6vw + .2rem,3.2rem);margin-bottom:.2rem}
    .hero p{opacity:.97;margin:.45rem 0 1rem;font-size:1.05rem}
    .badges{display:flex;gap:.6rem;flex-wrap:wrap}
    .badge{background:rgba(255,255,255,.18);padding:.35rem .75rem;border-radius:999px;color:#fff;font-weight:800}

    .college-chip{display:inline-flex;align-items:center;gap:.45rem;padding:.4rem .85rem;border-radius:12px;font-weight:900;color:#e3346e;background: linear-gradient(#fff,#fff) padding-box, linear-gradient(135deg,var(--ring2),var(--ring4)) border-box;border:2px solid transparent;box-shadow:0 10px 28px rgba(204,35,102,.08)}
    body.dark .college-chip{color:#f48db2;background: linear-gradient(#15171a,#15171a) padding-box, linear-gradient(135deg,var(--ring2),var(--ring4)) border-box;box-shadow:0 10px 24px rgba(244,141,178,.06)}

    /* SECTIONS */
    main{max-width:var(--maxw);margin:1.6rem auto}
    section.card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);margin:1.6rem 0;overflow:hidden}
    .card .head{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.2rem;background:linear-gradient(90deg, rgba(220,39,67,.04), transparent)}
    .card .title{font-weight:900;color:var(--accent2)}
    .card .bar{height:4px;background:linear-gradient(90deg,var(--ring2),var(--ring4))}
    .card .body{padding:1.2rem;color:var(--muted)}

    /* Education */
    .edu-list{display:grid;gap:.8rem}
    .edu-item{background:linear-gradient(180deg,var(--card),var(--card-alt));padding:.9rem;border-radius:10px;border:1px solid rgba(0,0,0,.03)}
    body.dark .edu-item{background:var(--card);border-color:rgba(255,255,255,.03)}

    /* PROJECTS (kept polished) */
    .projects-grid{display:grid;gap:1rem;grid-template-columns:repeat(auto-fit,minmax(300px,1fr))}
    .project-card{display:flex;flex-direction:column;gap:.8rem;padding:1rem;border-radius:12px;border:1px solid rgba(0,0,0,.04);background:linear-gradient(180deg,var(--card),var(--card));min-height:150px;box-shadow:0 10px 26px rgba(0,0,0,.06);transition:transform .18s,box-shadow .18s}
    .project-media{height:84px;border-radius:10px;overflow:hidden;display:block;background:linear-gradient(135deg,var(--ring1),var(--ring3));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:900}
    .project-title{font-size:1.05rem;font-weight:900;color:var(--accent1);margin:0}
    .project-desc{color:var(--muted);margin:0;font-size:.98rem}
    .tech-list{display:flex;gap:8px;flex-wrap:wrap;margin-top:.6rem}
    .tech{background:rgba(0,0,0,.04);padding:.28rem .5rem;border-radius:999px;font-weight:800;font-size:.86rem}
    body.dark .project-card{border-color:rgba(255,255,255,.03);box-shadow:none}
    body.dark .tech{background:rgba(255,255,255,.03);color:var(--text)}
    .project-card:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(0,0,0,.08)}

    /* CONTACT buttons */
    .contact-grid{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin-top:12px}
    .contact-btn{display:inline-flex;align-items:center;justify-content:center;gap:.6rem;padding:.65rem 1rem;border-radius:12px;font-weight:900;cursor:pointer;color:#fff;background:linear-gradient(90deg,var(--ring2),var(--ring4));border:0;text-decoration:none;transition:transform .14s,box-shadow .14s}
    .contact-btn:hover{transform:translateY(-4px);box-shadow:0 12px 28px rgba(0,0,0,.10)}

    footer{padding:1.2rem 1rem;text-align:center;color:var(--muted)}

    /* reveal */
    .reveal{opacity:0;transform:translateY(12px);transition:opacity .45s,transform .45s}
    .reveal.in{opacity:1;transform:none}

    .to-top{position:fixed;right:14px;bottom:14px;z-index:220;display:none}

    /* ====== SKILLS: MINIMAL "ELEMENTS" ====== */
    .skill-section { display:flex; flex-direction:column; gap:8px; }
    .skill-list {
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap:12px;
      margin-top:10px;
      align-items:stretch;
    }
    .skill-item {
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:14px 16px;
      border-radius:12px;
      font-weight:900;
      font-size:1.02rem;
      background: linear-gradient(180deg, var(--card-alt), var(--card));
      color:var(--text);
      border:1px solid rgba(0,0,0,.04);
      transition: transform .14s ease, box-shadow .14s ease;
      text-align:center;
      min-height:56px;
    }
    .skill-item:focus { outline:3px solid rgba(204,35,102,.12); outline-offset:4px; }
    .skill-item:hover { transform: translateY(-6px); box-shadow:0 14px 30px rgba(0,0,0,.08); }
    body.dark .skill-item { background: linear-gradient(180deg,var(--card),var(--card-alt)); border-color:rgba(255,255,255,.03); color:var(--text); box-shadow:none; }

    @media (max-width:900px){
      body { font-size:16px; }
      header.hero { padding-top: calc(var(--nav-height) + 8px); }
      .hero-inner { padding-left:1.1rem; padding-right:1.1rem; min-height:auto; }
      .avatar-wrap { left:1rem; top: calc(var(--nav-height) + 8px); width:110px; height:110px; }
      .projects-grid { grid-template-columns: 1fr; }
      .skill-list { grid-template-columns: repeat(2, 1fr); }
      .contact-grid { flex-direction:column; align-items:stretch; }
      .contact-btn { width:100%; justify-content:center; }
    }

    @media (prefers-reduced-motion:reduce){
      *{transition:none!important;animation:none!important}
    }
  </style>
</head>
<body>
  <a href="#main" class="skip-link">Skip to main content</a>

  <!-- NAV -->
  <nav class="primary" aria-label="Main navigation">
    <div class="nav-inner container">
      <div class="brand" aria-hidden="false"><span class="brand-dot" aria-hidden="true"></span> Krishnakumar</div>

      <div id="menu" class="menu" role="menubar" aria-label="Primary">
        <a class="nav-link" href="#home">Home</a>
        <a class="nav-link" href="#summary">Summary</a>
        <a class="nav-link" href="#education">Education</a>
        <a class="nav-link" href="#skills">Skills</a>
        <a class="nav-link" href="#projects">Projects</a>
        <a class="nav-link" href="#resume">Resume</a>
        <a class="nav-link" href="#contact">Contact</a>

        <span id="navIndicator" class="nav-indicator" aria-hidden="true"></span>
      </div>

      <div class="nav-actions">
        <button id="themeToggle" class="btn btn--ghost" aria-pressed="false" title="Toggle theme">🌗</button>
        <button id="hamburger" class="hamburger" aria-expanded="false" aria-controls="menu" title="Open menu">☰</button>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <header id="home" class="hero" role="banner" aria-label="Home">
    <div class="hero-inner container">
      <div class="avatar-wrap" aria-hidden="false">
        <img class="avatar" src="profile.jpg" alt="Profile photo — replace profile.jpg">
      </div>

      <h1>Krishnakumar — Software Engineer (Student)</h1>
      <p class="lead">Aspiring Software Engineer with a foundation in Computer Science — building readable, reliable software and learning by doing.</p>

      <div class="badges" style="margin-top:.6rem">
        <span class="badge">B.Sc Computer Science</span>
        <span class="badge"><span class="college-chip">🏫 S.R.M. Arts and Science College</span></span>
        <span class="badge">Chengalpattu, TN</span>
      </div>
    </div>
  </header>

  <main id="main">
    <!-- SUMMARY -->
    <section id="summary" class="card reveal" aria-labelledby="summaryTitle">
      <div class="head container">
        <h2 class="title" id="summaryTitle">Professional Summary</h2>
        <div class="college-chip" aria-hidden="true">S.R.M. Arts and Science College</div>
      </div>
      <div class="bar" aria-hidden="true"></div>
      <div class="body container">
        <p class="lead">Computer Science student focused on software engineering fundamentals and practical problem solving. Comfortable with Java and core web technologies; I build small, usable projects with attention to readability, performance, and basic testing. Seeking internships or entry-level roles to apply fundamentals and learn from experienced teams.</p>

        <ul style="margin-top:.8rem;color:var(--muted);list-style:none;padding-left:0;display:grid;gap:.5rem">
          <li><strong>Strengths:</strong> Clear communication, disciplined learning, consistent coding style, Git/GitHub usage.</li>
          <li><strong>Focus areas:</strong> Java, data structures, simple APIs, and accessible UI.</li>
        </ul>
      </div>
    </section>

    <!-- EDUCATION -->
    <section id="education" class="card reveal" aria-labelledby="educationTitle">
      <div class="head container">
        <h2 class="title" id="educationTitle">Education</h2>
        <div class="college-chip" aria-hidden="true">S.R.M. Arts and Science College</div>
      </div>
      <div class="bar" aria-hidden="true"></div>
      <div class="body container">
        <div class="edu-list">
          <div class="edu-item">
            <strong>B.Sc — Computer Science</strong>
            <div style="color:var(--muted);margin:.45rem 0">S.R.M. Arts and Science College • 2024 – 2027 (3rd semester)</div>
            <div>Coursework: OOP (Java), Data Structures, Web Technologies, DBMS.</div>
          </div>

          <div class="edu-item">
            <strong>Higher Secondary (CS)</strong>
            <div style="color:var(--muted);margin:.45rem 0">Completed — Mathematics & Computer Science</div>
          </div>
        </div>
      </div>
    </section>

    <!-- SKILLS (MINIMAL ELEMENTS) -->
    <section id="skills" class="card reveal" aria-labelledby="skillsTitle">
      <div class="head container">
        <h2 class="title" id="skillsTitle">Skills</h2>
        <div class="college-chip" aria-hidden="true">Core &amp; Tools</div>
      </div>
      <div class="bar" aria-hidden="true"></div>

      <div class="body container">
        <p class="lead">Courses / core skills — minimal and clear.</p>

        <div class="skill-section" style="margin-top:10px;">
          <div class="skill-list" role="list" aria-label="Skills list">
            <!-- Minimal separate elements (pills) -->
             <div class="skill-item" role="listitem" tabindex="0">DSA</div>

            <div class="skill-item" role="listitem" tabindex="0">Java</div>
            <div class="skill-item" role="listitem" tabindex="0">Python</div>
            <div class="skill-item" role="listitem" tabindex="0">HTML</div>
            <div class="skill-item" role="listitem" tabindex="0">CSS</div>
            <div class="skill-item" role="listitem" tabindex="0">JavaScript</div>
            <div class="skill-item" role="listitem" tabindex="0">React (Basics)</div>
            <div class="skill-item" role="listitem" tabindex="0">Git &amp; GitHub</div>
            <div class="skill-item" role="listitem" tabindex="0">Responsive Design</div>
            <div class="skill-item" role="listitem" tabindex="0">UI/UX</div>
          </div>
        </div>
      </div>
    </section>

    <!-- PROJECTS -->
    <section id="projects" class="card reveal" aria-labelledby="projectsTitle">
      <div class="head container">
        <h2 class="title" id="projectsTitle">Projects</h2>
        <div class="college-chip" aria-hidden="true">Practice &amp; Demos</div>
      </div>
      <div class="bar" aria-hidden="true"></div>
      <div class="body container">
        <p class="lead">•</p>

        <div class="projects-grid" aria-live="polite" style="margin-top:1rem;">
          <article class="project-card" aria-labelledby="proj1">
            <div class="project-media" aria-hidden="true">
              <svg viewBox="0 0 120 60" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
                <rect width="120" height="60" rx="8" fill="rgba(255,255,255,.12)"></rect>
                <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="10" fill="white" font-family="Inter,Arial">Math Quiz</text>
              </svg>
            </div>
            <h3 class="project-title" id="proj1">Math Quiz Game</h3>
            <p class="project-desc">A web quiz for arithmetic practice that records scores and focuses on UX and timing. Built for a college expo.</p>
            <div class="tech-list" aria-hidden="true">
              <span class="tech">JavaScript</span>
              <span class="tech">HTML</span>
              <span class="tech">CSS</span>
            </div>
          </article>

          <article class="project-card" aria-labelledby="proj2">
            <div class="project-media" aria-hidden="true">
              <svg viewBox="0 0 120 60" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
                <rect width="120" height="60" rx="8" fill="rgba(255,255,255,.12)"></rect>
                <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="10" fill="white" font-family="Inter,Arial">Cyber Safety</text>
              </svg>
            </div>
            <h3 class="project-title" id="proj2">Cyber Safety Quiz</h3>
            <p class="project-desc">Interactive module teaching password hygiene, phishing recognition, and safe browsing, accessible for all users.</p>
            <div class="tech-list" aria-hidden="true">
              <span class="tech">JavaScript</span>
              <span class="tech">Accessibility</span>
            </div>
          </article>

          <article class="project-card" aria-labelledby="proj3">
            <div class="project-media" aria-hidden="true">
              <svg viewBox="0 0 120 60" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
                <rect width="120" height="60" rx="8" fill="rgba(255,255,255,.12)"></rect>
                <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="10" fill="white" font-family="Inter,Arial">E-Cart</text>
              </svg>
            </div>
            <h3 class="project-title" id="proj3">E-Cart Website</h3>
            <p class="project-desc">Mock storefront: product cards, cart UI, and checkout flow prototypes focused on component structure and state handling.</p>
            <div class="tech-list" aria-hidden="true">
              <span class="tech">HTML</span>
              <span class="tech">CSS</span>
              <span class="tech">JavaScript</span>
            </div>
          </article>

          <article class="project-card" aria-labelledby="proj4">
            <div class="project-media" aria-hidden="true">
              <svg viewBox="0 0 120 60" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
                <rect width="120" height="60" rx="8" fill="rgba(255,255,255,.12)"></rect>
                <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="10" fill="white" font-family="Inter,Arial">Chatbot</text>
              </svg>
            </div>
            <h3 class="project-title" id="proj4">IBM Chatbot (Demo)</h3>
            <p class="project-desc">Concept chatbot for FAQs and simple intent recognition showing dialog flows and fallback handling.</p>
            <div class="tech-list" aria-hidden="true">
              <span class="tech">Dialog Flow</span>
              <span class="tech">Design</span>
            </div>
          </article>

          <article class="project-card" aria-labelledby="proj5">
            <div class="project-media" aria-hidden="true">
              <svg viewBox="0 0 120 60" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet">
                <rect width="120" height="60" rx="8" fill="rgba(255,255,255,.12)"></rect>
                <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="10" fill="white" font-family="Inter,Arial">Portal</text>
              </svg>
            </div>
            <h3 class="project-title" id="proj5">College Portal</h3>
            <p class="project-desc">Prototype portal for announcements and timetables — focused on clarity and information architecture for students.</p>
            <div class="tech-list" aria-hidden="true">
              <span class="tech">UI Design</span>
              <span class="tech">Responsive</span>
            </div>
          </article>
        </div>
      </div>
    </section>

    <!-- RESUME -->
    <section id="resume" class="card reveal" aria-labelledby="resumeTitle">
      <div class="head container">
        <h2 class="title" id="resumeTitle">Resume</h2>
        <div class="college-chip" aria-hidden="true">PDF</div>
      </div>
      <div class="bar" aria-hidden="true"></div>
      <div class="body container" style="display:flex;align-items:center;justify-content:space-between;gap:1rem;flex-wrap:wrap">
        <div class="lead">Download my resume to see full details on education, projects and skills.</div>
        <a id="resumeBtn" class="btn btn--primary" href="Krishnakumar-Resume.pdf" download>⬇️ Download Resume</a>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="card reveal" aria-labelledby="contactTitle">
      <div class="head container">
        <h2 class="title" id="contactTitle">Contact</h2>
        <div class="college-chip" aria-hidden="true">Let's Connect</div>
      </div>
      <div class="bar" aria-hidden="true"></div>
      <div class="body container">
        <p class="lead">Links</p>
        <div class="contact-grid" role="group" aria-label="Contact links">
          <a class="contact-btn" href="mailto:krishnakumarm@srmasc.ac.in" title="Email Krishnakumar">📧 Email</a>
          <a class="contact-btn" href="https://github.com/Krish00i7" title="GitHub profile">🐙 GitHub</a>
          <a class="contact-btn" href="https://www.linkedin.com/in/krishnakumar-m-073027312" title="LinkedIn profile">💼 LinkedIn</a>
        </div>
      </div>
    </section>
  </main>

  <footer>© 2025 Krishnakumar • Built with HTML, CSS &amp; JavaScript</footer>

  <a id="toTop" class="to-top btn btn--primary" href="#top" title="Back to top" style="display:none">↑</a>

  <script>
    (function(){
      const body = document.body;
      const nav = document.querySelector('nav.primary');
      const menu = document.getElementById('menu');
      const navIndicator = document.getElementById('navIndicator');
      const navLinks = Array.from(document.querySelectorAll('.nav-link'));
      const sections = Array.from(document.querySelectorAll('header[id], main section[id]'));
      const hamburger = document.getElementById('hamburger');
      const themeToggle = document.getElementById('themeToggle');
      const resumeBtn = document.getElementById('resumeBtn');
      const toTop = document.getElementById('toTop');

      /* Theme init */
      (function initTheme(){
        const saved = localStorage.getItem('theme');
        const prefers = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        if(saved === 'dark' || (!saved && prefers)) body.classList.add('dark');
        themeToggle.addEventListener('click', () => {
          body.classList.toggle('dark');
          localStorage.setItem('theme', body.classList.contains('dark') ? 'dark' : 'light');
          requestAnimationFrame(updateIndicator);
        });
      })();

      /* nav offsets to avoid sticky overlap */
      function updateNavOffsets(){
        const navHeight = nav.getBoundingClientRect().height;
        document.documentElement.style.setProperty('--nav-height', navHeight + 'px');
        document.querySelectorAll('header[id], main section[id]').forEach(el => {
          el.style.scrollMarginTop = (navHeight + 12) + 'px';
        });
      }

      /* sliding indicator */
      function updateIndicator(){
        const isMobileMenuOpen = body.classList.contains('menu-open') && window.innerWidth <= 900;
        if(isMobileMenuOpen){ navIndicator.style.opacity = 0; return; }
        const active = document.querySelector('.menu a.active') || document.querySelector('.nav-link.active') || navLinks[0];
        if(!active){ navIndicator.style.opacity = 0; return; }
        const menuRect = menu.getBoundingClientRect();
        const aRect = active.getBoundingClientRect();
        const left = aRect.left - menuRect.left;
        navIndicator.style.width = Math.max(aRect.width, 8) + 'px';
        navIndicator.style.transform = `translateX(${left}px)`;
        navIndicator.style.opacity = 1;
      }

      /* scroll spy */
      const spy = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if(entry.isIntersecting){
            const id = entry.target.id;
            navLinks.forEach(link => link.classList.toggle('active', link.getAttribute('href') === '#' + id));
            updateIndicator();
          }
        });
      }, { rootMargin: '-40% 0px -45% 0px', threshold: 0.05 });
      sections.forEach(s => spy.observe(s));

      /* smooth anchors + auto-close mobile */
      navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
          const id = link.getAttribute('href').slice(1);
          const target = document.getElementById(id);
          if(target){ e.preventDefault(); target.scrollIntoView({ behavior:'smooth', block:'start' }); }
          if(window.innerWidth <= 900 && body.classList.contains('menu-open')){
            body.classList.remove('menu-open');
            hamburger.setAttribute('aria-expanded','false');
            setTimeout(updateIndicator, 220);
          }
        });
      });

      /* hamburger */
      hamburger.addEventListener('click', () => {
        const opened = body.classList.toggle('menu-open');
        hamburger.setAttribute('aria-expanded', opened ? 'true' : 'false');
        setTimeout(()=>{ updateNavOffsets(); updateIndicator(); }, 230);
      });
      hamburger.addEventListener('keydown', ev => { if(ev.key === 'Enter' || ev.key === ' ') { ev.preventDefault(); hamburger.click(); } });

      /* reveal on scroll */
      const revealObserver = new IntersectionObserver(entries => {
        entries.forEach(entry => { if(entry.isIntersecting){ entry.target.classList.add('in'); revealObserver.unobserve(entry.target); } });
      }, { threshold: .12 });
      document.querySelectorAll('.reveal').forEach(el => revealObserver.observe(el));

      /* back-to-top */
      const showTop = () => toTop.style.display = (window.scrollY > 520 ? 'inline-flex' : 'none');
      window.addEventListener('scroll', showTop);
      showTop();

      /* resume guard */
      if(resumeBtn){
        resumeBtn.addEventListener('click', (e) => {
          const href = resumeBtn.getAttribute('href') || '';
          if(!href || href === '#'){ e.preventDefault(); alert('Add your resume PDF (Krishnakumar-Resume.pdf) next to this file.'); }
        });
      }

      /* init layout */
      function init(){
        updateNavOffsets();
        updateIndicator();
        if(!document.querySelector('.menu a.active')) navLinks[0].classList.add('active');
      }
      window.addEventListener('load', init);
      window.addEventListener('resize', () => { updateNavOffsets(); updateIndicator(); });

      /* debounce indicator updates */
      let raf = 0;
      window.addEventListener('resize', () => { if(raf) cancelAnimationFrame(raf); raf = requestAnimationFrame(()=>{ updateIndicator(); raf = 0; }); });
    })();
  </script>
</body>
</html>